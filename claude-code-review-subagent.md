# **코드 리뷰 SubAgent 핵심 정리**
  
[출처](https://zenn.dev/malleus/articles/claude-code-review-subagent )   
  
---

**개요:**  
Claude Code의 SubAgent(서브에이전트) 기능 중 **코드 리뷰에 특화한 커스텀 SubAgent**의 실무 활용법을 정리한 내용이다. SubAgent를 쓰지 않으면 매번 컨텍스트 분리와 인수인계를 고려해야 하지만, 코드 리뷰 전용 SubAgent를 만들어두면 이 문제를 깔끔하게 해결할 수 있다.


## **Claude Code 내장 SubAgent 종류:**
Claude Code에는 기본적으로 세 가지 내장 SubAgent가 있다.

- **Explore**: 코드베이스 탐색에 특화
- **Plan**: 구현 계획 설계에 특화
- **General-purpose**: 범용 복잡 태스크에 대응

여기에 더해 **커스텀 에이전트 생성**이 가능하며, 이것이 핵심이다.

  
## **SubAgent 최대 장점 — 컨텍스트 보전:**
SubAgent의 가장 큰 메리트는 **독립된 컨텍스트 윈도우에서 동작**한다는 점이다. 일반 대화나 내장 `/review` 명령으로 리뷰를 요청하면, 리뷰 결과가 메인 대화 컨텍스트에 섞여 들어간다. SubAgent를 사용하면 이 문제가 완전히 해결된다.

구체적인 이점은 세 가지다.

- **메인 대화 컨텍스트 절약**: 리뷰 상세 내용은 독립 윈도우에서 처리되므로 메인이 오염되지 않는다
- **고수준 대화에 집중 가능**: "이 설계 어떻게 생각해?" 같은 본질적인 논의에 전념할 수 있다
- **복수 태스크 병행 가능**: 리뷰를 진행하면서 다음 구현을 동시에 논의할 수 있다

  
## **전용 SubAgent의 또 다른 강점 — 특화된 동작:**
커스텀 SubAgent에는 태스크에 특화된 시스템 프롬프트와 툴셋을 정의할 수 있다.

- **리뷰 관점 지정**: 보안, 성능, 테스트 등 프로젝트 고유 기준을 설정
- **피드백 형식 고정**: 우선도별 구조화된 출력 형식을 통일
- **사용 툴 제한**: `Read`, `Grep`, `Bash`만 허용하고 `Write`는 제외 → 코드를 임의로 수정하지 못하게 방지

매번 지시하지 않아도 일관된 품질의 리뷰가 가능해진다.

  
## **내장 `/review` 명령과의 비교:**

| 항목 | SubAgent (커스텀) | `/review` 명령 |
|---|---|---|
| 기동 방법 | 자동 위임 또는 명시적 지정 | `/review`로 명시 호출 |
| 컨텍스트 | **독립** 컨텍스트 윈도우 | 현재 대화에 추가됨 |
| 대화 분리 | 완전 분리 (메인 오염 없음) | 메인 대화에 통합 |
| 커스터마이즈 | 시스템 프롬프트·툴·모델 자유 설정 가능 | 매번 문장으로 지시해야 함 |
| 툴 제한 | 에이전트 고유 툴셋 지정 가능 | 진행 중 세션에 의존 |
  

## **사용 구분 기준:**
- **SubAgent가 적합한 경우**: 장시간 세션에서 반복 리뷰 / 프로젝트 고유 기준 적용 / 일관된 품질·형식이 필요 / 메인 컨텍스트를 절약하고 싶을 때
- **`/review`가 적합한 경우**: 한 번만 가볍게 확인할 때 / 커스터마이즈 불필요한 단순 리뷰 / 이미 짧은 대화라 컨텍스트 오염이 신경 쓰이지 않을 때

반복 리뷰가 발생하는 환경에서는 SubAgent가 압도적으로 실용적이다.

  
## **최소 구성 — 실제 파일 예시:**
파일 저장 위치는 두 가지다.

- `.claude/agents/code-reviewer.md` → 프로젝트 전용
- `~/.claude/agents/code-reviewer.md` → 전 프로젝트 공통

```markdown
---
name: code-reviewer
description: 코드 변경을 리뷰. 품질과 보안을 체크.
tools: Read, Grep, Glob, Bash
model: inherit
---

경험 풍부한 코드 리뷰어로 동작해주세요.

리뷰 시 다음을 확인:
- 보안상 문제가 없는가
- 성능 병목이 없는가
- 테스트가 적절한가
- 코드의 가독성

우선도를 붙여 피드백해주세요:
- Critical: 필수 수정
- Major: 강력 권장
- Minor: 검토 권장
```

  
## **사용 방법:**
에이전트는 자동으로 선택된다. Claude가 요청 내용을 보고 알아서 `code-reviewer` SubAgent를 선택해 리뷰를 수행한다.

```
> 최근 변경사항을 리뷰해주세요
```

명시적으로 지정하고 싶을 때는 다음과 같이 입력한다.

```
> code-reviewer 서브에이전트를 사용해서 이 PR을 체크해주세요
```

  
## **핵심 요약:**
코드 리뷰 전용 SubAgent를 만들어두면 세 가지 이점이 동시에 달성된다. 모든 PR에서 동일한 관점으로 **일관된 리뷰 기준**을 유지하고, 보안부터 문서까지 **포괄적인 체크**가 가능하며, 자동 리뷰로 사람은 본질적인 판단에만 **집중**할 수 있다. 설정 자체도 마크다운 파일 하나를 저장하는 것으로 끝난다.  