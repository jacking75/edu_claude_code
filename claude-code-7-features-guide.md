# Claude Code 7가지 확장 기능 완전 정리
  
[출처](https://zenn.dev/tmasuyama1114/articles/claude_code_extension_guide )


## **핵심 요약:**
Claude Code의 7가지 기능은 **"2개의 축"** 으로 정리하면 혼란 없이 이해할 수 있다.

- **축1** — 언제 읽히는가? (상시 / 조건부 / 필요시 / 수동)
- **축2** — 누가 동작하는가? (Claude 본체 / 별도 프로세스 / 외부 셸 / 외부 서비스)


## **2축 분류표**

**축1 — 언제 읽히는가:**

| 분류 | 기능 |
|---|---|
| 상시 | `CLAUDE.md` |
| 조건부 (특정 파일 조작 시) | `.claude/rules/` |
| 조건부 (이벤트 발생 시 반드시 실행) | `Hooks` |
| 필요 시 (Claude가 판단) | `Skills` |
| 필요 시 (요청 시) | `Sub-agents` |
| 필요 시 (외부 연동 시) | `MCP` |
| 수동 (유저가 실행) | `커스텀 커맨드` |

**축2 — 누가 동작하는가:**

| 분류 | 기능 |
|---|---|
| Claude 본체 | `CLAUDE.md`, `.claude/rules/`, `Skills`, `커스텀 커맨드` |
| 별도 프로세스 (독립 컨텍스트) | `Sub-agents` |
| 외부 셸 커맨드 | `Hooks` |
| 외부 서비스 | `MCP` |


## **각 기능 상세**

**CLAUDE.md — 항상 적용되는 기본 룰:**

- **축 위치**: 상시 × Claude 본체
- **비유**: 편의점 전점 공통 매뉴얼. 어떤 시프트든 반드시 지키는 기본 동작.
- **역할**: Claude Code 기동 시 자동으로 읽히는 파일. 코딩 규약, 금지 사항, 아키텍처 방침 등 항상 적용하고 싶은 룰을 작성한다.
- **주의**: 파일이 비대해지면 컨텍스트를 압박한다. 조건부 적용이 필요하면 `.claude/rules/` 를 사용한다.

```markdown
# 프로젝트 룰
- 인덴트는 스페이스 2칸
- 커밋 메시지는 한국어로
- 테스트는 필수
```

---

**.claude/rules/ — 조건부로 적용되는 룰:**

- **축 위치**: 조건부 × Claude 본체
- **비유**: 편의점 매장별 구역 룰. 핫스낵 담당과 계산대 담당은 적용되는 절차가 다르다.
- **역할**: `paths` 지정으로 특정 파일을 조작했을 때만 룰을 읽어들인다. `CLAUDE.md` 비대화 문제를 해결하는 구조다.
- **적합한 케이스**: 프론트엔드 / 백엔드별 다른 룰, 특정 디렉토리 고유 규약, 파일 종류별 설정.

```yaml
---
paths: src/api/**/*.ts
---

# API 개발 룰
- 모든 엔드포인트에서 입력 검증 필수
- 표준 에러 응답 포맷 사용
```

---

**Skills — 필요할 때만 읽히는 지식:**

- **축 위치**: 필요 시(Claude 판단) × Claude 본체
- **비유**: 백야드의 매뉴얼 선반. 필요하다고 판단했을 때 꺼내서 확인한다. 선반의 라벨(description)을 보고 Claude가 스스로 판단한다.
- **역할**: Claude가 "이 지식이 필요하다"고 판단했을 때만 읽히는 구조. 평소에는 이름과 설명만 메모리에 상주하고, 필요할 때만 본체가 로드된다.
- **적합한 케이스**: 디자인 시스템 가이드라인, 특정 기술 베스트 프랙티스, 참조 빈도는 낮지만 중요한 지식.
- **주의**: `description`이 모호하면 Claude가 필요한 타이밍에 읽어들이지 않는다. "무엇을 할 수 있고, 언제 사용하는가"를 구체적으로 써야 한다.

```yaml
---
name: frontend-design
description: 프론트엔드 디자인 룰. UI 구현 시 자동 적용.
---

# 디자인 룰
- Primary: #3B82F6
- Secondary: #10B981
```

---

**Sub-agents — 별도 컨텍스트에서 동작하는 분신:**

- **축 위치**: 필요 시(요청 시) × 별도 프로세스
- **비유**: 본사 서포트 센터에 전화. 전화로 물어보면 본사 스태프가 조사해서 답만 돌려준다. 과정은 받지 않고 결론만 수신한다.
- **역할**: 메인 Claude와 **독립된 컨텍스트**에서 동작한다. 대량 파일을 읽고 조사해도 메인 대화 이력이 오염되지 않으며, 최종 결과 요약만 반환된다.
- **적합한 케이스**: 대규모 코드베이스 조사, 전문적인 리뷰(보안, 퍼포먼스 등), 메인 컨텍스트를 오염시키고 싶지 않은 무거운 처리.
- **주의**: Sub-agents는 메인 대화 내용을 모른다. 필요한 정보는 명시적으로 전달해야 한다.

```yaml
---
name: code-reviewer
description: 코드 품질과 보안 체크. 코드 수정 후 자동 위임.
tools: Read, Grep, Glob, Bash
---

당신은 시니어 코드 리뷰어입니다.
```

---

**MCP — 외부 툴과의 연결 수단:**

- **축 위치**: 필요 시(외부 연동) × 외부 서비스
- **비유**: 편의점의 Loppi/멀티미디어 단말기. 콘서트 티켓 구매, 공과금 납부 등 편의점 점원만으로는 불가능한 것을 외부 시스템과 연결해 실현한다.
- **역할**: Claude Code를 외부 툴, DB, API와 연결하는 구조다. 이전 기능들이 Claude의 "지식"을 확장하는 것이었다면, MCP는 "외부 세계와의 연결"을 담당한다.
- **적합한 케이스**: DB 접근, 외부 API 연동(GitHub, Slack 등), 파일시스템 외 리소스 조작.
- **주의**: 서버 설정에 일정 수준의 기술적 지식이 필요하며, 네트워크 문제나 인증 에러 가능성도 있다.

```bash
# GitHub 연동
claude mcp add --transport http github https://mcp.github.com

# DB 연동
claude mcp add --transport stdio postgres -- python postgres-mcp.py
```

---

**커스텀 커맨드 — 정형 작업의 단축키:**

- **축 위치**: 수동(유저 실행) × Claude 본체
- **비유**: 계산대의 정형 멘트. "봉투 필요하세요?", "포인트 카드 있으세요?" 등 매번 말을 생각하지 않아도 정해진 프레이즈로 처리한다.
- **역할**: 자주 쓰는 프롬프트를 `/커맨드명`으로 호출할 수 있게 하는 구조다.
- **적합한 케이스**: 커밋 생성, 테스트 실행, 배포 준비.
- **주의**: Skills와 달리 자동으로 호출되지 않는다. 유저가 명시적으로 `/commit` 등을 실행해야 한다.

```yaml
---
allowed-tools: Bash(git add:*), Bash(git commit:*)
argument-hint: [commit message]
---

## 컨텍스트
- 현재 스테이징 상태: !`git status`
- 차분: !`git diff HEAD`

## 태스크
위 변경사항을 바탕으로 적절한 커밋 메시지를 작성하고 커밋 실행
```

---

**Hooks — 이벤트 발생 시 반드시 실행되는 커맨드:**

- **축 위치**: 조건부(반드시 실행) × 외부 셸 커맨드
- **비유**: 편의점 입점 센서의 "딩동" 소리. 손님이 문을 열면 점원이 알아채지 못해도 반드시 울린다. 100% 자동 발동이며 멈출 수 없다.
- **역할**: 특정 라이프사이클 이벤트 발생 시 **반드시 실행**되는 셸 커맨드다. `.claude/rules/`도 조건부지만, Hooks와의 차이는 "결정론적으로 실행된다"는 점이다.
- **적합한 케이스**: 파일 편집 후 자동 포맷, 세션 시작 시 환경 세팅, 태스크 완료 시 알림, 위험한 커맨드 차단.
- **주의**: 셸 스크립트 지식이 필요하며, 설정 실수로 워크플로우가 멈출 수 있다.

**대표 이벤트:**

| 이벤트 | 발화 타이밍 |
|---|---|
| `SessionStart` | 세션 시작 시 |
| `PreToolUse` | 툴 실행 전 |
| `PostToolUse` | 툴 실행 후 |
| `Stop` | 태스크 완료 시 |

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "command": "npx prettier --write $CLAUDE_FILE_PATH"
      }
    ]
  }
}
```

---

## **어떤 기능을 선택할지 — 4가지 질문 판단 트리**

새 요건이 생겼을 때 아래 순서로 판단한다.

```
Q1. 외부 연동이 필요한가?
    → YES: MCP

Q2. 이벤트 기반으로 자동 실행하고 싶은가?
    → YES: Hooks

Q3. 독립된 컨텍스트에서 작업시키고 싶은가?
    → YES: Sub-agents

Q4. Claude 본체의 지식/룰을 확장하고 싶은가?
    → 항상 적용: CLAUDE.md
    → 특정 조건에서만 적용: .claude/rules/
    → 필요할 때만 로드: Skills
    → 원클릭으로 실행: 커스텀 커맨드
```

**그레이존 판단 기준** (예: 코드 리뷰 룰 → CLAUDE.md vs Skills):
- 항상 의식하게 하고 싶다 → `CLAUDE.md`
- 리뷰 시에만 상세 체크리스트를 사용하고 싶다 → `Skills`

---

## **단점 및 한계**

학습 비용이 존재한다. 기능이 7개나 되므로 각각의 역할과 설정 방법을 익히는 데 시간이 걸린다. 다만, Claude Code를 처음 시작하는 단계에서 모두 이해할 필요는 없다. 우선 `CLAUDE.md`부터 시작해 필요에 따라 기능을 추가하는 방식이 권장된다.

그레이존이 존재한다. "어디에 쓸지" 고민되는 케이스는 반드시 발생한다. 특히 Skills와 Sub-agents의 경계는 모호하다.

설정 파일이 분산된다. `CLAUDE.md`, `.claude/rules/`, `.claude/skills/`, `.claude/agents/`, `.claude/commands/` 등 설정 파일이 여기저기 분산되어 프로젝트에 따라 관리가 복잡해질 수 있다.   